<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
    <title></title>
    <link type="text/css" rel="stylesheet" href="assets/css/github-markdown.css">
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css">
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css"/>
  </head>
  <body>
    <article class="markdown-body"><div style="width:1000px; margin:0 auto;">
<center>

#Week - 14
#Output devices : Apr 27

</center>


##Assignment :

This week we need to add an output device into the existing microcontroller board we have made.


My plan for output device is to develop output board with LCD and power supply circuit. Which Reads the Input and Display it.

---------


##Preparation: Test the lcd module

Hardware testing：
        I picked Lumex  M E300052 1602 LCD module, . Trying to display &quot;Hello world&quot; message to testify the module.

 Connect the wire：

     GND &lt;-&gt; LCD GND-1

     VCC &lt;-&gt; LCD R/W-5 &amp; VCC-2

     PA5 &lt;-&gt; RS 4

     PA4 &lt;-&gt; LCD E -6

     PA3 &lt;-&gt; DB4-11

     PA2 &lt;-&gt; DB5-12

     PA1 &lt;-&gt; DB6-13

     PA0 &lt;-&gt; DB7-14


<center><img src="img/w14/2.jpeg" width="800"/></center>


Use the following sample code to drive the LCD display using arduino.

<center><img src="img/w14/o1.1.png" width="600"/></center>



 The test program was sucess full.


<center><img src="gif/w14/1.gif" width="800"/></center>



--------------

Next I tried Niel&#39;s Program. I edited the text which going to display. 



<center><img src="img/w14/c.png" width="600"/></center>

I used the commend on the terminal for genrating the hex.

<center><img src="img/w14/make.png" width="300"/></center>


<code>sudo make -f hello.LCD.44.make</code>

<br>


<center><img src="img/w14/prgm.1.png" width="400"/></center>
<br>

<code>sudo make -f hello.LCD.44.make program-usbtiny</code>
<br>
<center><img src="img/w14/prgm.png" width="600"/></center>
<br>

the programming was sucess. Its start agiain displaying.

<br>

<center><img src="gif/w14/3.gif" width="800"/></center>

<br>
--------------

## Distance display on LCD

Then I tried to program di

<br>

<code>#include &lt;LiquidCrystal.h&gt; //Load Liquid Crystal Library
LiquidCrystal LCD(5,4,3,2,1,0);  //Create Liquid Crystal Object called LCD


const int trigPin = 7;
const int echoPin = 6;

void setup() {

LCD.begin(16,2); //Tell Arduino to start your 16 column 2 row LCD
LCD.setCursor(0,0);  //Set LCD cursor to upper left corner, column 0, row 0
LCD.print(&quot;Target Distance:&quot;);  //Print Message on First Row
}

void loop()
{
  // establish variables for duration of the ping, 
  // and the distance result in inches and centimeters:
  long duration, inches, cm;

  // The sensor is triggered by a HIGH pulse of 10 or more microseconds.
  // Give a short LOW pulse beforehand to ensure a clean HIGH pulse:
  pinMode(trigPin, OUTPUT);
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);

  // Read the signal from the sensor: a HIGH pulse whose
  // duration is the time (in microseconds) from the sending
  // of the ping to the reception of its echo off of an object.
  pinMode(echoPin, INPUT);
  duration = pulseIn(echoPin, HIGH); 

  // convert the time into a distance
  inches = microsecondsToInches(duration);
  cm = microsecondsToCentimeters(duration);
  LCD.setCursor(0,1);  //Set LCD cursor to upper left corner, column 0, row 0
  LCD.print(&quot; &quot;); 
  LCD.setCursor(0,1);  //Set LCD cursor to upper left corner, column 0, row 0
  LCD.print(inches);  //Print Message on First Row
  LCD.print(&quot;  in&quot;); 
  //Print your units.
  delay(250); //pause to let things settle
}
long microsecondsToInches(long microseconds)
{
  // According to Parallax&#39;s datasheet for the PING))), there are
  // 73.746 microseconds per inch (i.e. sound travels at 1130 feet per
  // second).  This gives the distance travelled by the ping, outbound
  // and return, so we divide by 2 to get the distance of the obstacle.
  // See: http://www.parallax.com/dl/docs/prod/acc/28015-PING-v1.3.pdf
  return microseconds / 74 / 2;
}
//long microsecondsToCentimeters(long microseconds)
//{
  // The speed of sound is 340 m/s or 29 microseconds per centimeter.
  // The ping travels out and back, so to find the distance of the
  // object we take half of the distance travelled.
  //return microseconds /29 / 2;
//}</code>
<br>

<center><img src="gif/w14/4.gif" width="800"/></center>
<br>
-------------

##Files






</div>    </article>
  </body>
</html>
