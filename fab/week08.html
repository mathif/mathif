<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>week-8</title>
    <link type="text/css" rel="stylesheet" href="assets/css/bootstrap.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/bootstrap-responsive.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/style.css"/>
    <style>
    body {
      background: url('assets/img/textured_paper.png') repeat top left;
      background-color: #f6f6f6;
    }
    </style>
  </head>
<body>

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span3"><ul class="nav nav-list">
    <li class="sidebar-header-1"><a href="#week-8">Week 8</a></li>
    <li class="sidebar-header-1"><a href="#embedded-programming">Embedded programming</a></li>
    <li class="sidebar-header-2"><a href="#assignment">Assignment</a></li>
    <li class="sidebar-header-2"><a href="#arduino-installetion-and-setting-fabisp">Arduino Installetion and setting FabISP</a></li>
    <li class="sidebar-header-2"><a href="#adding-attiny-boards">Adding Attiny Boards</a></li>
    <li class="sidebar-header-2"><a href="#programming">Programming</a></li>
    <li class="sidebar-header-3"><a href="#ic-attiny-44-diagram">IC Attiny 44 diagram</a></li>
    <li class="sidebar-header-3"><a href="#-blink-led-code-blink-zip-">[Blink led](code/Blink.zip)</a></li>
    <li class="sidebar-header-3"><a href="#-button-press-led-on-code-button_press_led_on-zip-">[Button press LED on](code/Button_press_LED_on.zip)</a></li>
    <li class="sidebar-header-3"><a href="#-serial-communication-code-serialcommunication-zip-">[Serial communication](code/serialcommunication.zip)</a></li>
    <li class="sidebar-header-2"><a href="#files">Files</a></li>
</ul>
      </div>
      <div class="span9 main"><h1 id="week-8"><a class="header-link" href="#week-8"></a>Week 8</h1>
<h1 id="embedded-programming"><a class="header-link" href="#embedded-programming"></a>Embedded programming</h1>
<h2 id="assignment"><a class="header-link" href="#assignment"></a>Assignment</h2>
<p>This weeks assignment consist of reading the microcontroller data sheet (attiny) to understand the functioning of our microcontroller and program my board (hello world) to do something, with as many different programming languages and programming environments as possible.</p>
<hr>
<h2 id="arduino-installetion-and-setting-fabisp"><a class="header-link" href="#arduino-installetion-and-setting-fabisp"></a>Arduino Installetion and setting FabISP</h2>
<p> First download and install the arduino software. click <a href="https://www.arduino.cc/en/Main/Software">here</a></p>
<ul class="list">
<li>unzip it</li>
<li>move the folder to desktop</li>
</ul>
<p>open terminal in arduino folder</p>
<pre class="hljs"><code>    <span class="hljs-attribute">sudo</span> ./arduino</code></pre><p>Or  </p>
<p>if you need desktp icon. open terminal in arduino folder</p>
<pre class="hljs"><code>    <span class="hljs-selector-tag">sh</span> <span class="hljs-selector-tag">arduino</span><span class="hljs-selector-class">.desktop</span></code></pre><p>In desktop you can see Arduino IDE file , rigth click on it &gt; properties &gt; permisions&gt; mark tick on &quot;Allow executeing file as program&quot; .Now you can see aurduino IDE in your desktop.</p>
<hr>
<h2 id="adding-attiny-boards"><a class="header-link" href="#adding-attiny-boards"></a>Adding Attiny Boards</h2>
<p>Tutorial <a href="http://highlowtech.org/?p=1695">link</a></p>
<p>1- Installing Arduino and the ATtiny files</p>
<p>Open the setings </b>file&gt;preferences</b>. Then paste the URLs address.</p>
<p><code>https://raw.githubusercontent.com/damellis/attiny/ide-1.6.x-boards-manager/package_damellis_attiny_index.json</code></p>
<p><br></p>
<center><img src="img/w8/b1.png" width= "800"/></center>

<p>OR</p>
<p>By default, The attiny board wont be present in Arduino. You either have install the borad files or paste the ATtiny files into the arduino directory.To install the files, select</p>
<p><code>tools&gt;board&gt;boards manager</code></p>
<p><br></p>
<center><img src="img/w8/b2.PNG" width= "800"/></center>


<hr>
<h2 id="programming"><a class="header-link" href="#programming"></a>Programming</h2>
<h3 id="ic-attiny-44-diagram"><a class="header-link" href="#ic-attiny-44-diagram"></a>IC Attiny 44 diagram</h3>
<p> I had to make sure that the pin out of the ATtiny44 was compliant with that of Arduino as shown in the image here:</p>
<center><img src="img/w8/attiny44.png" width= "800"/></center>

<p>I Refer this sheet for pin arduino ATtiny configuration.</p>
<center><img src="img/w8/arduino_vs_attiny_pinouts.png" width= "800"/></center>



<h3 id="-blink-led-code-blink-zip-"><a class="header-link" href="#-blink-led-code-blink-zip-"></a><a href="code/Blink.zip">Blink led</a></h3>
<p>I uploaded the blink example code using Arduino on to the ATtiny44 board I made the other day (all the programs created can be found embedded in this page).</p>
<p>The program was successfully uploaded on to the board through the FabISP (which I made, check here) using the following settings:</p>
<ul class="list">
<li>Board: ATtiny</li>
<li>Processor: ATtiny 44</li>
<li>Clock: 20 MHz (external)
Programmer: USB Tiny ISP</li>
</ul>
<pre class="hljs"><code>    <span class="hljs-keyword">void</span> <span class="hljs-built_in">setup</span>() {
     <span class="hljs-built_in">pinMode</span>(<span class="hljs-number">8</span>, <span class="hljs-literal">OUTPUT</span>);
    }
    <span class="hljs-keyword">void</span> <span class="hljs-built_in">loop</span>() {
    <span class="hljs-built_in">digitalWrite</span>(<span class="hljs-number">8</span>, <span class="hljs-literal">HIGH</span>);   
    <span class="hljs-built_in">delay</span>(<span class="hljs-number">1000</span>); 
    <span class="hljs-built_in">digitalWrite</span>(<span class="hljs-number">8</span>, <span class="hljs-literal">LOW</span>);    
    <span class="hljs-built_in">delay</span>(<span class="hljs-number">1000</span>);             
    }</code></pre><center><img src="gif/w8/blink.gif" width= "800"/></center>

<hr>
<h3 id="-button-press-led-on-code-button_press_led_on-zip-"><a class="header-link" href="#-button-press-led-on-code-button_press_led_on-zip-"></a><a href="code/Button_press_LED_on.zip">Button press LED on</a></h3>
<pre class="hljs"><code><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> buttonPin = <span class="hljs-number">6</span>;   
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> ledPin =  <span class="hljs-number">8</span>;      


<span class="hljs-keyword">int</span> buttonState = <span class="hljs-number">0</span>;         

<span class="hljs-keyword">void</span> <span class="hljs-built_in">setup</span>() {

  <span class="hljs-built_in">pinMode</span>(ledPin, <span class="hljs-literal">OUTPUT</span>);

  <span class="hljs-built_in">digitalWrite</span>(buttonPin,<span class="hljs-literal">HIGH</span>);
}

<span class="hljs-keyword">void</span> <span class="hljs-built_in">loop</span>() {

  buttonState = <span class="hljs-built_in">digitalRead</span>(buttonPin);


  <span class="hljs-built_in">if</span> (buttonState == <span class="hljs-literal">HIGH</span>) {

    <span class="hljs-built_in">digitalWrite</span>(ledPin, <span class="hljs-literal">LOW</span>);
  } <span class="hljs-built_in">else</span> {

    <span class="hljs-built_in">digitalWrite</span>(ledPin, <span class="hljs-literal">HIGH</span>);
  }
}</code></pre><center><img src="gif/w8/button.gif" width= "800"/></center>



<hr>
<h3 id="-serial-communication-code-serialcommunication-zip-"><a class="header-link" href="#-serial-communication-code-serialcommunication-zip-"></a><a href="code/serialcommunication.zip">Serial communication</a></h3>
<pre class="hljs"><code> <span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;SoftwareSerial.h&gt;</span></span>

<span class="hljs-built_in">SoftwareSerial</span> mySerial(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);


<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> buttonPin = <span class="hljs-number">6</span>;     
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> ledPin =  <span class="hljs-number">8</span>;    

<span class="hljs-keyword">int</span> buttonState = <span class="hljs-number">0</span>;        

<span class="hljs-keyword">void</span> <span class="hljs-built_in">setup</span>() {
  mySerial.<span class="hljs-built_in">begin</span>(<span class="hljs-number">9600</span>);

  <span class="hljs-built_in">pinMode</span>(ledPin, <span class="hljs-literal">OUTPUT</span>);

  <span class="hljs-built_in">pinMode</span>(buttonPin, <span class="hljs-literal">INPUT</span>);
  <span class="hljs-built_in">digitalWrite</span>(buttonPin, <span class="hljs-literal">HIGH</span>);
}

<span class="hljs-keyword">void</span> <span class="hljs-built_in">loop</span>() {

  buttonState = <span class="hljs-built_in">digitalRead</span>(buttonPin);
  <span class="hljs-built_in">if</span> (buttonState == <span class="hljs-literal">LOW</span>) {
    <span class="hljs-built_in">digitalWrite</span>(ledPin, <span class="hljs-literal">HIGH</span>);
    mySerial.<span class="hljs-built_in">write</span>(<span class="hljs-string">"Hello world"</span>);
  } <span class="hljs-built_in">else</span> {
    <span class="hljs-built_in">digitalWrite</span>(ledPin, <span class="hljs-literal">LOW</span>);
  }
}</code></pre><center><img src="gif/w8/serial.gif" width= "800"/></center>


<h2 id="files"><a class="header-link" href="#files"></a>Files</h2>
<ul class="list">
<li><p><a href="code/Blink.zip">Blink led</a></p>
</li>
<li><p><a href="code/Button_press_LED_on.zip">Button press LED on</a></p>
</li>
<li><p><a href="code/serialcommunication.zip">Serial communication</a></p>
</li>
</ul>
      </div>
    </div>
  </div>

  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
</body>
</html>
