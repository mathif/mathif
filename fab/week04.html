<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>week-4</title>
    <link type="text/css" rel="stylesheet" href="assets/css/bootstrap.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/bootstrap-responsive.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/style.css"/>
    <style>
    body {
      background: url('assets/img/textured_paper.png') repeat top left;
      background-color: #f6f6f6;
    }
    </style>
  </head>
<body>

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span3"><ul class="nav nav-list">
    <li class="sidebar-header-1"><a href="#week-4-electronics-production-feb-17-">Week-4 : Electronics production (Feb 17)</a></li>
    <li class="sidebar-header-2"><a href="#assignment">Assignment</a></li>
    <li class="sidebar-header-2"><a href="#fab-isp">Fab ISP</a></li>
    <li class="sidebar-header-3"><a href="#download-the-board-files-and-mill-the-board">Download the Board Files and Mill the Board</a></li>
    <li class="sidebar-header-2"><a href="#milled-fabisp-board">Milled FabISP Board</a></li>
    <li class="sidebar-header-2"><a href="#modela-milling-machine">Modela Milling Machine</a></li>
    <li class="sidebar-header-3"><a href="#working-with-modela-milling-machine">Working with Modela Milling Machine</a></li>
    <li class="sidebar-header-4"><a href="#fixing-your-board-to-the-modela">Fixing your board to the Modela</a></li>
    <li class="sidebar-header-4"><a href="#zeroing-z-axis">Zeroing Z-axis</a></li>
    <li class="sidebar-header-3"><a href="#bits">Bits</a></li>
    <li class="sidebar-header-4"><a href="#picking-a-bit">Picking a bit</a></li>
    <li class="sidebar-header-4"><a href="#putting-the-bit-in">Putting the bit in</a></li>
    <li class="sidebar-header-3"><a href="#zeroing-xand-y-axis">Zeroing Xand Y axis</a></li>
    <li class="sidebar-header-2"><a href="#stuff-board">Stuff Board</a></li>
    <li class="sidebar-header-3"><a href="#needed-components">Needed components</a></li>
    <li class="sidebar-header-2"><a href="#-programming-fabisp-http-fabacademy-org-archives-2015-doc-programming_fabisp-html-">[Programming FabISP](http://fabacademy.org/archives/2015/doc/programming_FabISP.html)</a></li>
    <li class="sidebar-header-4"><a href="#get-and-install-avrdude-gcc-software-and-dependencies">Get and install avrdude / GCC software and dependencies</a></li>
    <li class="sidebar-header-4"><a href="#download-the-firmware-from-the-fab-academy-electronics-production-page-">Download the firmware from the Fab Academy Electronics Production page.</a></li>
    <li class="sidebar-header-4"><a href="#edit-the-makefile">Edit the Makefile</a></li>
    <li class="sidebar-header-4"><a href="#program-the-fabisp">Program the FabISP</a></li>
    <li class="sidebar-header-4"><a href="#after-you-have-programmed-the-board-">After You Have Programmed the Board:</a></li>
</ul>
      </div>
      <div class="span9 main"><h1 id="week-4-electronics-production-feb-17-"><a class="header-link" href="#week-4-electronics-production-feb-17-"></a>Week-4 : Electronics production (Feb 17)</h1>
<h2 id="assignment"><a class="header-link" href="#assignment"></a>Assignment</h2>
<p>Assignment is to mill the board, stuff it with components and program it.</p>
<hr>
<h2 id="fab-isp"><a class="header-link" href="#fab-isp"></a>Fab ISP</h2>
<p>The FabISP is an in-system programmer for AVR microcontrollers, designed for production within a FabLab.</p>
<hr>
<h3 id="download-the-board-files-and-mill-the-board"><a class="header-link" href="#download-the-board-files-and-mill-the-board"></a>Download the Board Files and Mill the Board</h3>
<ul class="list">
<li><p>Download the traces of <a href="file/fabISP.zip">fabISP</a></p>
</li>
<li><p>Donload the outline <a href="">png</a></p>
</li>
</ul>
<center><img src="img/w4/hello.ISP.44.traces.png" width= "200"/> <img src="img/w4/hello.ISP.44.cutout.png" width= "200"/></center>

<hr>
<h2 id="milled-fabisp-board"><a class="header-link" href="#milled-fabisp-board"></a>Milled FabISP Board</h2>
<p>Run fab modules in the terminal</p>
<pre> $ fab </pre>

<p>Select input as PNG, output as Roland Models .rml and click the “make_png_rml” button to open the new window.</p>
<p>Once in the new window, you must load the particular PNG file of your circuit or board outline.  In the left column, click “load PNG”  and select your file.</p>
<p>Set the Z depth to -0.15 mm, set the speed to 3mm/s and set up your X and Y offsets.  Be aware that your PCB image might have an offset outside of traces.</p>
<hr>
<h2 id="modela-milling-machine"><a class="header-link" href="#modela-milling-machine"></a>Modela Milling Machine</h2>
<p>This machine is used to make PCBs for digital fabrication,this one is compatible with most 3d and 2d authoring software, making it ideal for the rapid prototyping of product designs.It becomes an essential part of Fab lab as it can use to milling of custom circuit boards, and the production of moulds. This Modela can be used on wood, mdf, modeling wax, plaster and FR1 circuit board blanks.</p>
<center><img src="img/w4/modella_milling/m1.JPG" width="500"/></center>

<hr>
<h3 id="working-with-modela-milling-machine"><a class="header-link" href="#working-with-modela-milling-machine"></a>Working with Modela Milling Machine</h3>
<p>1 .The Green power button, well controls the power.</p>
<p>2 .View, moves the cutting head away and the base plate towards you so that you can place/see your cutting surface.</p>
<p>3 .Tool Up, moves the cutting head up.</p>
<p>4 .Tool Down, moves the cutting head down</p>
<hr>
<h4 id="fixing-your-board-to-the-modela"><a class="header-link" href="#fixing-your-board-to-the-modela"></a>Fixing your board to the Modela</h4>
<p>First make sure you have a sacrificial board underneath the board that you are milling. When you drill out the PCB you are making, you might go further than the actual thickness of the board. Attach the sacrificial board and the board you are milling out to the modela with double sided tape. Make sure the tape is not overlapping in any way as to not make the base for your board uneven. </p>
<center><img src="img/w4/modella_milling/modela1.jpg" width="200"/> <img src="img/w4/modella_milling/modela2.jpg" width="355"/></center>

<hr>
<h4 id="zeroing-z-axis"><a class="header-link" href="#zeroing-z-axis"></a>Zeroing Z-axis</h4>
<p>First Turned on the Modella Milling Machine. To make it forget its previous <b>Z-zero</b> setting keep Push the both Butten Up and Down up to the Green LED blink into steady. To double check it probably used the view button to take it out of view mode.</p>
<center><img src="img/w4/modella_milling/control.png" width="100"/></center>

<p>Then,slowely slide the bit into the modela. Now with the Allen key, gently tighten the hex-nut to tighten the bit.</p>
<center><img src="img/w4/modella_milling/m3.JPG" width="500"/></center>


<hr>
<h3 id="bits"><a class="header-link" href="#bits"></a>Bits</h3>
<h4 id="picking-a-bit"><a class="header-link" href="#picking-a-bit"></a>Picking a bit</h4>
<p>To mill out the traces of a circuit board you will generally want to use a 1/64th endmill, but if you have a particularly rough circuit you might be able to get away with 1/32nd (if so, you&#39;ll need to adjust the commands in the previous section for a 1/32&quot; endmill).</p>
<h4 id="putting-the-bit-in"><a class="header-link" href="#putting-the-bit-in"></a>Putting the bit in</h4>
<p>Turn the Modela off and then on again to make it forget its previous z-zero setting. You&#39;ll probably need to press the view button to take it out of view mode. Then, slide the bit into the modela. When you put the bit into the modela, you don&#39;t have to tighten the set screws all that much. </p>
<hr>
<h3 id="zeroing-xand-y-axis"><a class="header-link" href="#zeroing-xand-y-axis"></a>Zeroing Xand Y axis</h3>
<p>Fab module window. Used the rml_move tool, change the position of x and y. For generating origin click on &#39;make rml&#39;.N ext sept was setting up the Z axis manually,the bit close as get to the copper plate but without touching it by keeping the down button pressed. Then loosened the set screws again using Allen key and pushed the bit all the way onto the copper Sheet, then tight the screws again.</p>
<center><img src="img/w4/modella_milling/m2.JPG" width="500"/></center>

<p>now the mechine is all set to milling,next step is loading a png file and start milling.</p>
<center><img src="img/w4/modella_milling/m4.JPG" width="500"/></center>



<hr>
<h2 id="stuff-board"><a class="header-link" href="#stuff-board"></a>Stuff Board</h2>
<p>Download the FabISP labeled board diagram so that you can see what components you need to and where to place them on the board.</p>
<center><img src="img/w4/hello.ISP.44.png" width= "200"/></center>


<p>That is, it allows us to program the microcontrollers on other boards we make, using nothing but a USB cable and 6-pin IDC to 6-pin IDC cable. It&#39;s based on the USBtiny and V-USB firmwares, which allow the ATtiny44 to perform USB communication in software. Programming can be done through avrdude.</p>
<p>The schematic (PDF) is super simple: USB connector, ATtiny44, and 6-pin ISP header, with assorted passive components. I started with the Eagle files for the USBtinyISP, although there&#39;s almost nothing left of it. Most of the parts for the FabISP are in the FabLab inventory. Exceptions include the Mini-B USB connector (SparkFun, Digi-Key), 12 MHz crystal (Digi-Key), and 18 pF capacitors for the crystal (Digi-Key).</p>
<h3 id="needed-components"><a class="header-link" href="#needed-components"></a>Needed components</h3>
<table width="495" border="1">
<tbody><tr>
<td width="247" valign="top"><ul class="list">
<li>1 ATTiny 44 microcontroller</li>
<li>1 Capacitor 1uF </li>
<li>2 Capacitor 10 pF </li>
<li>2 Resistor 100 ohm </li>
<li>1 Resistor 499 ohm </li>
<li>1 Resistor 1K ohm </li>
<li>1 Resistor 10K</li>
<li>one 6 pin header </li>
</ul></td>
<td width="232" valign="top"><ul class="list">
<li>1 USB connector </li>
<li>2 jumpers - 0 ohm resistors</li>
<li>1 Cystal 20MHz </li>
<li>two Zener Diode 3.3 V </li>
<li>one usb mini cable </li>
<li>one ribbon cable </li>
<li>two 6 pin connectors </li>
</ul></td>
</tr>
</tbody></table>




<p><br>
<br></p>
<center><img src="img/w4/s1.JPG" width= "450"/> <img src="img/w4/s2.JPG" width= "300"/></center>

<hr>
<h2 id="-programming-fabisp-http-fabacademy-org-archives-2015-doc-programming_fabisp-html-"><a class="header-link" href="#-programming-fabisp-http-fabacademy-org-archives-2015-doc-programming_fabisp-html-"></a><a href="http://fabacademy.org/archives/2015/doc/programming_FabISP.html">Programming FabISP</a></h2>
<h4 id="get-and-install-avrdude-gcc-software-and-dependencies"><a class="header-link" href="#get-and-install-avrdude-gcc-software-and-dependencies"></a>Get and install avrdude / GCC software and dependencies</h4>
<p>Open Terminal and type:</p>
<pre class="hljs"><code>    sudo apt-get <span class="hljs-keyword">install</span> flex byacc bison gcc libusb-dev avrdude   

    sudo apt-<span class="hljs-keyword">get</span> <span class="hljs-keyword">install</span> gcc-avr 

    sudo apt-<span class="hljs-keyword">get</span> <span class="hljs-keyword">install</span> avr-libc 

    sudo apt-<span class="hljs-keyword">get</span> <span class="hljs-keyword">install</span> libc6-dev</code></pre><h4 id="download-the-firmware-from-the-fab-academy-electronics-production-page-"><a class="header-link" href="#download-the-firmware-from-the-fab-academy-electronics-production-page-"></a>Download the firmware from the Fab Academy Electronics Production page.</h4>
<pre class="hljs"><code>    wget <span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/academy.cba.mit.edu/classes</span><span class="hljs-regexp">/embedded_programming/firmware</span>.zip</code></pre><p>Unzip the firmware, Move to the desktop</p>
<h4 id="edit-the-makefile"><a class="header-link" href="#edit-the-makefile"></a>Edit the Makefile</h4>
<p>The Makefile is set up to work with the AVRISP2 by default. If you are using another programmer, you will need to edit the Makefile.</p>
<pre class="hljs"><code>    <span class="hljs-built_in">cd</span> Desktop/firmware</code></pre><pre class="hljs"><code>    <span class="hljs-attribute">nano</span> Makefile</code></pre><p>select your ISP , other inactive by ging &#39;#&#39; before.</p>
<p>save it</p>
<h4 id="program-the-fabisp"><a class="header-link" href="#program-the-fabisp"></a>Program the FabISP</h4>
<p>Navigate to the directory where you saved the FabISP firmware. If you followed the instructions above, this will be the desktop.
Open your terminal / command line interface and move to the firmware directory.</p>
<pre class="hljs"><code>    <span class="hljs-keyword">cd</span> Desktop/firmware 

    <span class="hljs-keyword">make</span> clean

    <span class="hljs-keyword">make</span> hex

    <span class="hljs-keyword">make</span> fuse

    <span class="hljs-keyword">make</span> program</code></pre><p>Wooo! Success! </p>
<p>To Verify That Your ISP is working correctly:</p>
<pre class="hljs"><code>    lsusb</code></pre><p>it shows on your terminal</p>
<pre class="hljs"><code>    <span class="hljs-keyword">Bus </span><span class="hljs-number">002</span> Device <span class="hljs-number">004</span>: ID <span class="hljs-number">1781</span>:<span class="hljs-number">0</span>c9f <span class="hljs-keyword">Multiple </span>Vendors USBtiny</code></pre><hr>
<h4 id="after-you-have-programmed-the-board-"><a class="header-link" href="#after-you-have-programmed-the-board-"></a>After You Have Programmed the Board:</h4>
<p>Remove the 0 ohm resistor and solder bridge as shown in the picture below.</p>
<center><img src="img/w4/fabISP.JPG" width= "800"/></center>

<p>Now you can use it as a programmer to program other boards. </p>
      </div>
    </div>
  </div>

  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
</body>
</html>
